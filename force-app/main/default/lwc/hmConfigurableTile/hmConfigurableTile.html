<template>
  <div class={containerClass}>
    <div class={tileClass}>
      <template if:true={isLoading}>
        <lightning-spinner
          alternative-text="Loading"
          size="small"
        ></lightning-spinner>
      </template>

      <template if:false={isLoading}>
        <template if:true={error}>
          <div class="cc-error-message">{errorMessage}</div>
        </template>

        <template if:false={error}>
          <div class="cc-kpi-header">
            <div class={tileData.iconClass}>
              <lightning-icon
                icon-name={tileData.iconName}
                size="small"
              ></lightning-icon>
            </div>
            <template if:true={tileData.badge}>
              <div class={tileData.badge.class}>
                <template if:true={tileData.badge.icon}>
                  <lightning-icon
                    icon-name={tileData.badge.icon}
                    size="x-small"
                    class="cc-badge-icon"
                  ></lightning-icon>
                </template>
                <span class="cc-badge-text">{tileData.badge.text}</span>
              </div>
            </template>
          </div>
          <p class="cc-kpi-label">{title}</p>
          <p class="cc-kpi-value">{tileData.value}</p>
          <div class="cc-kpi-subtitle-spacer">
            <template if:true={subtitle}>
              <p class="cc-kpi-subtitle">{subtitle}</p>
            </template>
          </div>
        </template>
      </template>
    </div>
  </div>
</template>